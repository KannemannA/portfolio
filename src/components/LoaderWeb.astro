<div class="progress-container">
  <div class="progress-bar" id="load-progress"></div>
  <span class="progress-text">0%</span>
</div>

<script>
  const progressBar = document.getElementById("load-progress");
  const progressText = document.querySelector(".progress-text");
  let totalResources = 0;
  let loadedResources = 0;

  function updateProgress() {
    const progress = Math.min(
      (loadedResources / Math.max(totalResources, 1)) * 100,
      100
    );
    if (progressBar) {
      progressBar.style.width = `${progress}%`;
      if (progressText) {
        progressText.textContent = `${Math.round(progress)}%`;
      }
    }
  }

  const observer = new PerformanceObserver((list) => {
    list.getEntries().forEach(() => {
      loadedResources++;
      updateProgress();
    });
  });

  observer.observe({
    entryTypes: ["resource", "navigation"],
  });

  document.addEventListener("DOMContentLoaded", () => {
    totalResources = performance.getEntriesByType("resource").length + 1;
    updateProgress();
  });

  window.addEventListener("load", () => {
    loadedResources = totalResources;
    updateProgress();
    let loadContainer=document.querySelector(".progress-container");
    if (loadContainer instanceof HTMLElement) {
      setTimeout(() => {
        loadContainer.id="end-load"
      }, 300);
    }
    setTimeout(() => {
      document.body.style.overflow = 'auto';
    }, 1000);
  });
</script>

<style>
  #end-load{
    animation: loadAnimation 1s ease-in-out forwards;
  }

  @keyframes loadAnimation {
    99% {
      transform: translateY(-100vh);
    }
    100%{
      display: none;
    }
  }

  body{
    overflow: hidden;
  }

  .progress-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #dddddd;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  }

  .progress-bar {
    width: 0%;
    height: 4px;
    background: #02286e;
    transition: width 0.3s ease-out;
    border-radius: 2px;
  }

  .progress-text {
    margin-top: 10px;
    font-size: 14px;
    color: #333;
  }
</style>
